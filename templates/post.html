<!DOCTYPE html>
<html lang="en">
    {% include 'base/header.html' %}
    <!-- Page Header-->
    <header class="masthead" style="background-image: url('{{ blog_post.img_url }}')">
        <div class="container position-relative px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-md-10 col-lg-8 col-xl-7">
                    <div class="post-heading">
                        <h1>{{ blog_post.title }}</h1>
                        <h2 class="subheading">{{ blog_post.subtitle }}</h2>
                        <span class="meta">
                            Posted by
                            <a href="{{ url_for('home') }}">{{ blog_post.author.username }}</a>
                            on {{ blog_post.date }}
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Post Content-->
    <article class="mb-4">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-md-10 col-lg-8 col-xl-7">
                <h2>{{ blog_post.title }}</h2>
                <p>{{ blog_post.body | safe }}</p>

                <!-- Edit Button-->
                <div class="d-flex justify-content-end mb-4">
                    {% if current_user.is_authenticated %}
                    <a class="btn btn-primary float-right" href="{{ url_for('manage_post', post_id=blog_post.id) }}">Edit Post</a>
                    {% endif %}
                </div>

                <!-- Comment Form -->
                <h3>Leave a Comment:</h3>
                <form method="POST" action="{{ url_for('add_comment', post_id=blog_post.id) }}">
                    {{ form.hidden_tag() }}
                    {{ form.comment(class="form-control", rows=5) }}
                    <button type="submit" class="btn btn-primary mt-2">Submit Comment</button>
                </form>
            </div>
        </div>
    </article>
    <!-- Footer-->
    {% include 'base/footer.html' %}
</html>
